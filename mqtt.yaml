---
broker: 172.24.32.13
port: 1883
client_id: home-assistant-1
discovery: true
discovery_prefix: "homeassistant"
keepalive: 60
protocol: 3.1
birth_message:
  topic: 'hass/status'
  payload: 'online'
  qos: 1
  retain: true
will_message:
  topic: 'hass/status'
  payload: 'offline'
  qos: 1
  retain: true

sensor:

  # Weather #
  - platform: mqtt
    name: "Weather station temperature"
    state_topic: "weatherstation"
    unit_of_measurement: "Â°C"
    value_template: "{{ value_json.temperature }}"
  - platform: mqtt
    name: "Weather station relative humidity"
    state_topic: "weatherstation"
    unit_of_measurement: "%"
    value_template: "{{ value_json.relhumidity }}"
  - platform: mqtt
    name: "Weather station wind velocity"
    state_topic: "weatherstation"
    unit_of_measurement: "m/s"
    value_template: "{{ value_json.windvelocity }}"
  - platform: mqtt
    name: "Weather station wind maximum"
    state_topic: "weatherstation"
    unit_of_measurement: "m/s"
    value_template: "{{ value_json.windmaximum }}"
  - platform: mqtt
    name: "Weather station wind direction"
    state_topic: "weatherstation"
    unit_of_measurement: ""
    value_template: "{{ value_json.winddirection }}"
  - platform: mqtt
    name: "Weather station rainfall"
    state_topic: "weatherstation"
    unit_of_measurement: "mm"
    value_template: "{{ value_json.rain }}"

  - platform: mqtt
    name: "Kyle Oneplus One Battery"
    state_topic: "owntracks/bagpuss/a0001"
    unit_of_measurement: "%"
    value_template: "{{ value_json.batt }}"

binary_sensors:
  - platform: mqtt
    name: Charlotte Bed Sensor
    device_class: occupancy
    state_topic: "devices/5ccf7fd8d915/Contact1/state"
    payload_on: "1"
    payload_off: "0"

  - platform: mqtt
    name: Kyle Bed Sensor
    device_class: occupancy
    state_topic: "devices/5ccf7fd8d915/Contact2/state"
    payload_on: "1"
    payload_off: "0"

  - platform: mqtt
    name: "Kyle Driving"
    state_topic: "driving/mode/kyle"
    payload_on: "true"
    payload_off: "false"

  - platform: mqtt
    name: "Charlotte Driving"
    state_topic: "driving/mode/charlotte"
    payload_on: "true"
    payload_off: "false"

switch:
  - platform: mqtt
    name: Octoprint Relay 1
    unique_id: octoprint_relay_1
    command_topic: "octoprint/usb_relay_1/set"
    payload_on: 'true'
    payload_off: 'false'

  - platform: mqtt
    name: Octoprint Relay 2
    unique_id: octoprint_relay_2
    command_topic: "octoprint/usb_relay_2/set"
    payload_on: 'true'
    payload_off: 'false'

camera:
  - name: Back Door Last Person
    platform: mqtt
    topic: frigate/back_door/person/snapshot
  - name: Front Door Last Person
    platform: mqtt
    topic: frigate/front_door/person/snapshot
  - name: Driveway Last Person
    platform: mqtt
    topic: frigate/driveway/person/snapshot
  - name: Driveway Last Car
    platform: mqtt
    topic: frigate/driveway/car/snapshot
  - name: octoPrint camera
    platform: mqtt
    topic: octoPrint/camera