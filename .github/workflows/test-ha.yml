name: "Test Home-Assistant"
on:
  push:
    branch:
      - master
  pull_request:
    branch:
      - master

jobs:
  fakeconfig:
    name: Fake secrets
    runs-on: ubuntu-latest
    steps:
      - name: Copy secrets
        run: mv travis_secrets.yaml secrets.yaml; cp esphome/travis_secrets.yaml.txt esphome/common/secrets.yaml; mv esphome/travis_secrets.yaml.txt esphome/secrets.yaml
  check:
    name: Home Assistant Config Check
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@master
    - name: Run Config Check
      uses: ludeeus/action-ha-config-check@master
