binary_sensor:
  - platform: trend
    sensors:
      octoprint_bed_cooling:
        entity_id: sensor.octoprint_bed_temperature
        sample_duration: 10
        device_class: cold

      octoprint_bed_heating:
        entity_id: sensor.octoprint_bed_temperature
        sample_duration: 10
        device_class: heat

      # Also sensor.octoprint_bed_target and sensor.octoprint_tool_0_target

      octoprint_bed_cooling:
        entity_id: sensor.octoprint_tool_0_temperature
        sample_duration: 10
        device_class: cold

      octoprint_bed_heating:
        entity_id: sensor.octoprint_tool_0_temperature
        sample_duration: 10
        device_class: heat


automation:
  - alias: Printer state change notification
    trigger:
      - platform: state
        entity_id: sensor.octoprint_print_status
        from: "Operational"
        to: "Printing"
    action:
      - service: notify.alexa_media
        data_template:
          target:
            - media_player.study
          data:
            type: announce
            #method: all
          message: >-
            {% if trigger.to_state.state == 'Printing' %}
              {{ trigger.to_state.attributes.friendly_name }} has begun printing
            {% else %}
              {{ trigger.to_state.attributes.friendly_name }} has stopped printing
            {% endif %}