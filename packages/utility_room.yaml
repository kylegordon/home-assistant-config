---
automation:
  - alias: Utility room light on
    trigger:
      - platform: state
        entity_id:
          - binary_sensor.utility_room_door
          - binary_sensor.utility_room_motion
        to: 'on'
        from: 'off'
    condition:
      - condition: numeric_state
        entity_id: sensor.average_external_light_level
        below: 1000
      - condition: state
        entity_id: binary_sensor.home_occupied
        state: "on"
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id:
            - light.utility_room

  - alias: Utility room light off
    trigger:
      - platform: state
        entity_id: binary_sensor.utility_room_door
        to: 'off'
        for:
          seconds: 60
      - platform: state
        entity_id: binary_sensor.utility_room_motion
        to: 'off'
        for:
          seconds: 60
    action:
      - service: light.turn_off
        entity_id: light.utility_room
