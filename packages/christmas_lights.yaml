group:
  outside_christmas_decorations:
    name: Outside Christmas Decorations
    view: no
    entities:
      - light.utility_room_decorations
      - switch.garage_decorations

automation:
  - alias: Christmas decorations - on evening
    trigger:
      - platform: numeric_state
        entity_id: sensor.outside_utility_room_light_level
        below: 100
        for:
          minutes: 5
    condition:
      - condition: and
        conditions:
          - condition: time
            after: "16:00:00"
            before: "00:00:00"
          - condition: template
            value_template: '{{ now().strftime("%m") == "12" }}'
    action:
      - service: homeassistant.turn_on
        entity_id: group.outside_decorations
      - service: homeassistant.turn_on
        entity_id: group.christmas_lights

  - alias: Christmas decorations - on morning
    trigger:
      - platform: time
        at: "06:00:00"
    condition:
      - condition: template
        value_template: '{{ now().strftime("%m") == "12" }}'
    action:
      - service: homeassistant.turn_on
        entity_id: group.outside_decorations
      - service: homeassistant.turn_on
        entity_id: group.christmas_lights


  - alias: Christmas decorations - off
    trigger:
      - platform: time
        at: "00:00:00"
      - platform: time
        at: "12:00:00"
      - platform: numeric_state
        entity_id: sensor.outside_utility_room_light_level
        above: 100
    action:
      - service: homeassistant.turn_off
        entity_id: group.outside_decorations
      - service: homeassistant.turn_off
        entity_id: group.christmas_lights
