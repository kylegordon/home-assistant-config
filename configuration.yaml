# Inspired by https://github.com/bruhautomation/BRUH2-Home-Assistant-Configuration

homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 69
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/London
  customize:
    script.restart_ha:
      icon: mdi:power
      friendly_name: "Restart Home Assistant"
    group.all_automations:
      hidden: false
    group.all_scripts:
      hidden: false
    sensor.garage_pir_sound:
      friendly_name: Garage Motion
    sensor.weather_station_rainfall:
      icon: mdi:weather-rainy
    sensor.weather_station_wind_velocity:
        icon: mdi:weather-windy-variant
    sensor.weather_station_wind_maximum:
        icon: mdi:weather-windy
    sensor.weather_station_relative_humidity:
        icon: mdi:water-percent
    sensor.house_average_humidity:
        icon: mdi:water-percent
    sensor.house_average_temperature:
        icon: mdi:thermometer
    switch.living_room_television:
        icon: mdi:television
    light.kyles_bedside:
        icon: mdi:hotel
    light.edison_lamp:
      assumed_state: false
    light.sideboard_light:
      assumed_state: false
    light.lava_lamp:
      assumed_state: false
    light.christmas_tree:
      assumed_state: false
    light.candle_arch:
      assumed_state: false
    light.star_burst:
      assumed_state: false
    light.arc_lamp:
      assumed_state: false
    group.bedside_lights:
        icon: mdi:hotel
    sensor.kyle_status:
        entity_picture: https://www.gravatar.com/avatar/c5affce936e162c5ef9752c3276f99be.jpg
    input_boolean.guest_mode:
        icon: mdi:account-multiple-plus
    light.craft_room_desk_level:
        friendly_name: Craft Room Desk

# Enables the frontend
frontend:

# Enable the config panel
config: 

recorder:
  db_url: !secret db_url
  purge_interval: 1
  purge_keep_days: 8

http:
  # Uncomment this to add a password (recommended!)
  api_password: !secret api_password
  cors_allowed_origins:
    - http://homeauto.vpn.glasgownet.com
  trusted_networks: 
      - 172.24.32.0/24
      - 10.8.0.18/32
      - 127.0.0.1

deconz:
  host: 172.24.32.13
  port: 8100

google:
  client_id: !secret google_oauth_client_id
  client_secret: !secret google_oauth_client_secret
  track_new_calendar: False

# Checks for available updates
updater:

influxdb:
  host: 172.24.32.13

# Discover some devices automatically
discovery:

rfxtrx:
  # Remember this is mapped in the docker-compose file
  device: /dev/ttyUSB0
  debug: False

#hue:
#  bridges:
#    #- host: hue1.vpn.glasgownet.com
#    - host: 172.24.32.12
#      filename: phue-00178817a562.conf

zwave:
  usb_path: /dev/ttyUSB1
  debug: false

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

wake_on_lan:

notify:
  - name: twitter_thegordonhome
    platform: twitter
    consumer_key: !secret twitter_consumer_key
    consumer_secret: !secret twitter_consumer_secret
    access_token: !secret twitter_access_token
    access_token_secret: !secret twitter_access_token_secret
  - name: email_kyle
    platform: smtp
    server: smtp.gmail.com
    port: 587
    starttls: true
    username: !secret gmail_username
    password: !secret gmail_password
    sender: homeassistant@glasgownet.com
    recipient: kyle@glasgownet.com
  - name: kodi_living_room_info
    platform: kodi
    host: oxcart.vpn.glasgownet.com
  - name: kodi_living_room_warning
    platform: kodi
    host: oxcart.vpn.glasgownet.com
    data:
      icon: "warning"

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:
  include:
    domains:
      - sensor
      - media_player

logger:
  default: warn
  logs:
    homeassistant.components.switch.broadlink: debug
    # homeassistant.components.switch.rfxtrx: debug
    # homeassistant.components.binary_sensor.rfxtrx: debug
    # homeassistant.components.rfxtrx: debug

# Track the sun
sun:

emulated_hue:
  # Max of 49! 
  # https://www.home-assistant.io/components/emulated_hue/
  expose_by_default: false
  exposed_domains:
    - switch
    - light
    - group
    - input_boolean
    - media_player
  entities:
    group.lightswitch_relays:
      hidden: false
    group.ensuite:
      hidden: false
    group.bedside_lights:
      hidden: false
    group.outside_lights:
      hidden: false
    group.hall:
      hidden: false
    group.living_room_lights:
      hidden: false
    input_boolean.guest_mode:
      hidden: false
    light.study_light:
      hidden: false
    light.bedside_charlotte:
      hidden: false
    light.bedside_kyle:
      hidden: false
    light.garage_lights:
      hidden: false
    light.craft_room:
      hidden: false
    light.craft_room_bookcase:
      hidden: false
    light.craft_room_fairy_lights:
      hidden: false
    light.craft_room_desk_level:
      hidden: false
    light.utility_room:
      hidden: false
    light.master_bedroom:
      hidden: false
    light.sideboard_light:
      hidden: false
    light.uplighter:
      hidden: false
    light.sofa_overhead:
      hidden: false
    light.dining_table_overhead:
      hidden: false
    light.star_burst:
      hidden: false
    light.arc_lamp:
      hidden: false
    switch.tellybox:
      hidden: false
    input_boolean.restart_ha:
      hidden: false

############
# Includes #
############
# automation: !include automation.yaml
#script: !include scripts.yaml
sensor: !include sensors.yaml
binary_sensor: !include binary_sensors.yaml
light: !include lights.yaml
switch: !include switches.yaml
media_player: !include media_players.yaml
device_tracker: !include device_trackers.yaml
group: !include groups.yaml
camera: !include cameras.yaml
zone: !include zones/places.yaml
shell_command: !include shell_commands.yaml
climate: !include climate.yaml

# Merged Includes
automation: !include_dir_list automation
scene: !include_dir_list scenes

# Merged items requiring a dictionary
input_select: !include_dir_named input_select
input_boolean: !include_dir_named input_boolean
script: !include_dir_named scripts/


mqtt:
  broker: 172.24.32.13
  port: 1883
  client_id: home-assistant-1
  keepalive: 60
  protocol: 3.1
  birth_message:
    topic: 'hass/status'
    payload: 'online'
    qos: 1
    retain: true
  will_message:
    topic: 'hass/status'
    payload: 'offline'
    qos: 1
    retain: true
