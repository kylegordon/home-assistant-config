alias: Cheerlights
trigger:
  platform: mqtt
  topic: cheerlightsRGB
action:
  - service_template: light.turn_on
    data_template:
      brightness_pct: 50
      rgb_color:
        - "{{ trigger.payload[1:3] | int(0,16) }}"
        - "{{ trigger.payload[3:5] | int(0,16) }}"
        - "{{ trigger.payload[-2:] | int(0,16) }}"
      entity_id:
        - light.sense_gloworb_1_ring
        - light.sense_gloworb_2_ring
  - service: light.turn_on
    data_template:
      entity_id: light.decking_lights
      brightness_pct: >
        {% if states('sensor.outside_utility_room_lightlevel') <= 300 %}
        100
        {% endif %}
      rgb_color:
        - "{{ trigger.payload[1:3] | int(0,16) }}"
        - "{{ trigger.payload[3:5] | int(0,16) }}"
        - "{{ trigger.payload[-2:] | int(0,16) }}"
