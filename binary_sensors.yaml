#- platform: iss

#- platform: aurora

## RFXcom ##

- platform: rfxtrx
  automatic_add: True
  devices:
    0b1100d800b8196e0a010f70:
      name: Outside Driveway Motion
      device_class: motion
    0b11000000b82b560a000060:
      name: Outside Front Motion
      device_class: motion
    #0a1400002c22a70a010060:
    #  name: Utility Room Door
    #  device_class: opening

#- platform: template
#  sensors:
#    Kyles_Bed:
#      friendly_name: Kyles Bed
#      device_class: occupancy
#      delay_on: 
#        minutes: 5
#      value_template: "{{ is_state('binary_sensor.kyle_bed_sensor', 'on') }}"

#- platform: template
#  sensors:
#    Charlottes_Bed:
#      friendly_name: Charlottes Bed
#      delay_on:
#        minutes: 5
#      device_class: occupancy
#      value_template: "{{ is_state('binary_sensor.charlotte_bed_sensor'), 'on' }}"

- platform: template
  sensors:
    living_room_tv_power:
      friendly_name: Living Room TV Power
      device_class: power
      value_template: "{{ states('sensor.tv_power_plug_power') | float > 20 }}"
    home_occupied:
      friendly_name: Home Occupied
      device_class: occupancy
      icon_template: >-
        {% if is_state('binary_sensor.home_occupied','on') %}
          mdi:home-account
        {% else %}
          mdi:home-outline
        {% endif %}
      value_template: "{{ is_state('person.kyle','home') or is_state('person.charlotte','home') or is_state('person.ronnie','home') }}"

- platform: mqtt
  name: Charlotte Bed Sensor
  device_class: occupancy
  state_topic: "devices/5ccf7fd8d915/Contact1/state"
  payload_on: "1"
  payload_off: "0"

- platform: mqtt
  name: Kyle Bed Sensor
  device_class: occupancy
  state_topic: "devices/5ccf7fd8d915/Contact2/state"
  payload_on: "1"
  payload_off: "0"


- platform: mqtt
  name: "Kyle Driving"
  state_topic: "driving/mode/kyle"
  payload_on: "true"
  payload_off: "false"

- platform: mqtt
  name: "Charlotte Driving"
  state_topic: "driving/mode/charlotte"
  payload_on: "true"
  payload_off: "false"


- platform: template
  sensors:
    device_critical:
      friendly_name: 'Device Critical'
      value_template: >-
                        {{ is_state('sensor.hallway_temperature', 'unavailable')
                        or is_state('sensor.kitchen_temperature', 'unavailable')
                        or is_state('sensor.utility_room_temperature', 'unavailable')
                        or is_state('sensor.study_temperature', 'unavailable')
                        or is_state('sensor.garage_temperature', 'unavailable')
                        or is_state('switch.guest_bedroom_lightswitch_relay', 'unavailable')
                        or is_state('switch.master_bedroom_lightswitch_relay', 'unavailable')
                        or is_state('light.driveway_floodlights', 'unavailable')
                        or is_state('light.front_door_floodlights', 'unavailable')
                        or is_state('light.back_floodlights', 'unavailable')
                        or is_state('light.garage_lights', 'unavailable')
                        or is_state('light.study_light', 'unavailable')
                        or is_state('light.guest_bedroom', 'unavailable')
                        or is_state('light.master_bedroom', 'unavailable')
                        or is_state('light.craft_room', 'unavailable')
                        or is_state('light.hall_bedrooms', 'unavailable')
                        or is_state('light.hall_entrance', 'unavailable')
                        or is_state('light.uplighter', 'unavailable')   }}
